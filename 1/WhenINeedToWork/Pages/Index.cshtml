@page
@model IndexModel
@{
  ViewData["Title"] = "Home page";
}

<head>


  @*<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css" integrity="sha384-TX8t27EcRE3e/ihU7zmQxVncDAy5uIKz4rEkgIXeMed4M0jlfIDPvg6uqKI2xXr2" crossorigin="anonymous">*@
  <link rel="stylesheet" href="css/modal.css" />
  @*<link rel="stylesheet" href="css/js-year-calendar.css" />*@
  <link rel="stylesheet" href="https://unpkg.com/js-year-calendar@latest/dist/js-year-calendar.min.css" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/css/bootstrap.min.css" />
  <link rel="stylesheet" href="https://unpkg.com/bootstrap-datepicker@1.8.0/dist/css/bootstrap-datepicker.standalone.min.css" />
  <link href="" />

</head>

<div class="text-center">
  <h1 class="display-4">"Добро пожаловать"</h1>
  <p>Здесь вы сможете создать свой календарь рабочих дней</p>
</div>

<body onload="startTime()">
  <script src="js/clock.js"></script>
  <div id="txt"></div>
  <div class="filter"></div>
</body>


<body>
  <div class="card" style="margin:10px;">
    <div class="card-header">Parameters</div>
    <div class="card-body">
      <form class="form-horizontal row">
        <div class="col col-lg-6 col-md-12">
          <div class="form-group row">
            <label for="current-year" class="col-sm-3 col-xs-12 control-label">Current year</label>
            <div class="col col-sm-5 col-xs-6">
              <input type="text" class="form-control" id="current-year" placeholder="Current year">
            </div>
            <div class="col col-sm-2 col-xs-3">
              <button id="update-current-year" type="button" class="btn btn-success">Update</button>
            </div>
            <div class="col col-sm-2 col-xs-3">
              <button id="get-current-year" type="button" class="btn btn-primary">Get</button>
            </div>
          </div>
          <div class="form-group row">
            <label for="min-date" class="col-sm-3 col-xs-12 control-label">Min date</label>
            <div class="col col-sm-5 col-xs-6">
              <input type="date" class="form-control" id="min-date" placeholder="Min date">
            </div>
            <div class="col col-sm-2 col-xs-3">
              <button id="update-min-date" type="button" class="btn btn-success">Update</button>
            </div>
            <div class="col col-sm-2 col-xs-3">
              <button id="get-min-date" type="button" class="btn btn-primary">Get</button>
            </div>
          </div>
          <div class="form-group row">
            <label for="max-date" class="col-sm-3 col-xs-12 control-label">Max date</label>
            <div class="col col-sm-5 col-xs-6">
              <input type="date" class="form-control" id="max-date" placeholder="Max date">
            </div>
            <div class="col col-sm-2 col-xs-3">
              <button id="update-max-date" type="button" class="btn btn-success">Update</button>
            </div>
            <div class="col col-sm-2 col-xs-3">
              <button id="get-max-date" type="button" class="btn btn-primary">Get</button>
            </div>
          </div>
          <div class="form-group row">
            <label for="style" class="col-sm-3 col-xs-12 control-label">Language</label>
            <div class="col col-sm-5 col-xs-6">
              <select class="form-control" id="language">
                <option value="nl">Dutch</option>
                <option value="en" selected>English</option>
                <option value="fr">French</option>
                <option value="de">German</option>
                <option value="it">Italian</option>
                <option value="ja">Japanese</option>
                <option value="pt">Portuguese</option>
                <option value="ru">Russian</option>
                <option value="es">Spanish</option>
                <option value="tr">Turkish</option>
              </select>
            </div>
            <div class="col col-sm-2 col-xs-3">
              <button id="update-language" type="button" class="btn btn-success">Update</button>
            </div>
            <div class="col col-sm-2 col-xs-3">
              <button id="get-language" type="button" class="btn btn-primary">Get</button>
            </div>
          </div>
          <div class="form-group row">
            <label for="style" class="col col-sm-3 col-xs-12 control-label">Style</label>
            <div class="col col-sm-5 col-xs-6">
              <div class="form-check form-check-inline">
                <input type="radio" name="style" id="style-border" class="form-check-input" />
                <label class="form-check-label">Border</label>
              </div>
              <div class="form-check form-check-inline">
                <input type="radio" name="style" id="style-background" class="form-check-input" checked />
                <label class="form-check-label">Background</label>
              </div>
            </div>
            <div class="col col-sm-2 col-xs-3">
              <button id="update-style" type="button" class="btn btn-success">Update</button>
            </div>
            <div class="col col-sm-2 col-xs-3">
              <button id="get-style" type="button" class="btn btn-primary">Get</button>
            </div>
          </div>
        </div>
        <div class="col col-lg-6 col-md-12">
          <div class="form-group row">
            <label for="style" class="col-sm-3 col-xs-12 control-label">Allow overlap</label>
            <div class="col col-sm-5 col-xs-6">
              <input type="checkbox" id="allow-overlap" class="form-check-input" checked />
              <label class="form-check-label">Allowed</label>
            </div>
            <div class="col col-sm-2 col-xs-3">
              <button id="update-overlap" type="button" class="btn btn-success">Update</button>
            </div>
            <div class="col col-sm-2 col-xs-3">
              <button id="get-overlap" type="button" class="btn btn-primary">Get</button>
            </div>
          </div>
          <div class="form-group row">
            <label for="style" class="col col-sm-3 col-xs-12 control-label">Range selection</label>
            <div class="col col-sm-5 col-xs-6">
              <input type="checkbox" id="enable-range-selection" class="form-check-input" />
              <label class="form-check-label">Enabled</label>
            </div>
            <div class="col col-sm-2 col-xs-3">
              <button id="update-range-selection" type="button" class="btn btn-success">Update</button>
            </div>
            <div class="col col-sm-2 col-xs-3">
              <button id="get-range-selection" type="button" class="btn btn-primary">Get</button>
            </div>
          </div>
          <div class="form-group row">
            <label for="style" class="col-sm-3 col-xs-12 control-label">Weeks number</label>
            <div class="col col-sm-5 col-xs-6">
              <input type="checkbox" id="display-week-number" class="form-check-input" />
              <label class="form-check-label">Displayed</label>
            </div>
            <div class="col col-sm-2 col-xs-3">
              <button id="update-week-number" type="button" class="btn btn-success">Update</button>
            </div>
            <div class="col col-sm-2 col-xs-3">
              <button id="get-week-number" type="button" class="btn btn-primary">Get</button>
            </div>
          </div>
          <div class="form-group row">
            <label for="style" class="col-sm-3 col-xs-12 control-label">Round limits</label>
            <div class="col col-sm-5 col-xs-6">
              <input type="checkbox" id="round-range-limit" class="form-check-input" />
              <label class="form-check-label">Enabled</label>
            </div>
            <div class="col col-sm-2 col-xs-3">
              <button id="update-round-limit" type="button" class="btn btn-success">Update</button>
            </div>
            <div class="col col-sm-2 col-xs-3">
              <button id="get-round-limit" type="button" class="btn btn-primary">Get</button>
            </div>
          </div>
          <div class="form-group row">
            <label for="style" class="col col-sm-3 col-xs-12 control-label">Always half day</label>
            <div class="col col-sm-5 col-xs-6">
              <input type="checkbox" id="always-half-day" class="form-check-input" />
              <label class="form-check-label">Enabled</label>
            </div>
            <div class="col col-sm-2 col-xs-3">
              <button id="update-half-day" type="button" class="btn btn-success">Update</button>
            </div>
            <div class="col col-sm-2 col-xs-3">
              <button id="get-half-day" type="button" class="btn btn-primary">Get</button>
            </div>
          </div>
        </div>
      </form>
    </div>
  </div>
  <div class="card" style="margin:10px;">
    <div class="card-header">Calendar</div>
    <div class="card-body">
      <div id="calendar"></div>
    </div>
  </div>
</body>

<body>
  <form name="workDays" id="workDays">
    <p>Выберите свой первый рабочий день</p>
    <p>
      <input type="date" name="calendar">
      <select>
        <option>1</option>
        <option>2</option>
        <option>3</option>
        <option>4</option>
        <option>5</option>
        <option>6</option>
        <option>7</option>
      </select>
      x
      <select>
        <option>1</option>
        <option>2</option>
        <option>3</option>
        <option>4</option>
        <option>5</option>
        <option>6</option>
        <option>7</option>
      </select>
      <input type="submit" name="submit" title="Отправить">
    </p>
  </form>


  @*<div data-provide="calendar" name="calendar" id="calendar">

  </div>*@

  <div class="modal fade" id="event-modal">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title">Событие</h5>
          <button type="button" class="close" data-dismiss="modal" aria-label="Отмена">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <div class="modal-body">
          <input type="hidden" name="event-index">
          <form class="form-horizontal">
            <div class="form-group row">
              <label for="event-name" class="col-sm-4 control-label">Название</label>
              <div class="col-sm-8">
                <input id="event-name" name="event-name" type="text" class="form-control">
              </div>
            </div>
            <div class="form-group row">
              <label for="event-location" class="col-sm-4 control-label">Место</label>
              <div class="col-sm-8">
                <input id="event-location" name="event-location" type="text" class="form-control">
              </div>
            </div>
            <div class="form-group row">
              <label for="min-date" class="col-sm-4 control-label">Дата</label>
              <div class="col-sm-8">
                <div class="input-group input-daterange" data-provide="datepicker">
                  <input id="min-date" name="event-start-date" type="text" class="form-control">
                  <div class="input-group-prepend input-group-append">
                    <div class="input-group-text">to</div>
                  </div>
                  <input name="event-end-date" type="text" class="form-control">
                </div>
              </div>
            </div>
          </form>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-default" data-dismiss="modal">Cancel</button>
          <button type="button" class="btn btn-primary" id="save-event">
            Сохранить
          </button>
        </div>
      </div>
    </div>
  </div>
  <div id="context-menu">
  </div>


  <br />
  <img src="~/images/printer.png" alt="Распечатать">
  <a href="javascript:void(0);" onclick="printPageArea('calendar')">Print</a>
  <button onclick="window.print()">Распечатать</button> @*пододвинуть кнопку вниз*@

  <form name="calcSalary" id="calcSalary" onsubmit="return false;">
    <p>Введите данные для расчета ЗП</p>
    <p>
      Количество часов:
      <input type="text" name="hours" id="hours" placeholder="100" style="width: 150px; left: 270px; position: absolute" />
    </p>
    <p>
      Часовая ставка:
      <input type="text" name="payment" id="payment" placeholder="100" style=" left: 270px; width: 150px; position: absolute" />
    </p>
    <p>
      Тип зарплаты:
      <select style="width: 150px; left: 270px; position: absolute" id="salaryType" name="salaryType">
        <option>С вычетом налогов</option>
        <option>Без вычета налогов</option>
      </select>
    </p>
    <p><button type="submit" id="calculateSalary" id="calculateSalary" ;>Расчитать</button></p>
    <div id="result"></div>
    @*<p>
        Приблизительная ЗП:
        <input type="text" name="result" id="result" style=" left: 270px; width: 150px; position: absolute"
      </p>*@
  </form>

  <a href="https://www.donationalerts.com/r/deppa" target="_blank"><img src="~/images/credit-card.png" alt="Плоти"></a>
  <a href="https://www.donationalerts.com/r/deppa">Donate</a>
</body>

<script src="js/base.js"></script>





@*<script src="js/js-year-calendar.js"></script>
  <script src="js/js-year-calendar.ru.js"></script>*@
<script src="js/plugins/modal.js"></script>
<script src="https://unpkg.com/js-year-calendar@latest/dist/js-year-calendar.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<script src="https://unpkg.com/popper.js@1.14.7/dist/umd/popper.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/js/bootstrap.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.8.0/js/bootstrap-datepicker.min.js"></script>
<script src="https://unpkg.com/js-year-calendar@latest/dist/js-year-calendar.min.js"></script>
<script src="https://unpkg.com/js-year-calendar@latest/locales/js-year-calendar.ru.js"></script>



<script>
  //функция для печати она сломана и работает не так как надо
  //Очень грустно
  printDivCSS = new String('<link href="https://unpkg.com/js-year-calendar@latest/dist/js-year-calendar.min.css" rel = "stylesheet"> ' +
    '<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/css/bootstrap.min.css" />' +
    '<link rel = "stylesheet" href = "https://unpkg.com/bootstrap-datepicker@1.8.0/dist/css/bootstrap-datepicker.standalone.min.css" />');
  function printPageArea(areaID) {
    var printContent = document.getElementById(areaID);
    var WinPrint = window.open('', '', 'width=900,height=650');
    WinPrint.document.write(printDivCSS);
    WinPrint.document.write(printContent.innerHTML);
    WinPrint.document.close();
    WinPrint.focus();
    WinPrint.print();

  }
</script>

<script>
  const currentYear = new Date().getFullYear();

  const calendar = new Calendar('#calendar', {
    style: 'background',
    dataSource: [
      {
        startDate: new Date(currentYear, 1, 4),
        endDate: new Date(currentYear, 1, 15)
      },
      {
        startDate: new Date(currentYear, 3, 5),
        endDate: new Date(currentYear, 5, 15)
      }
    ]
  });

  document.querySelector('#update-current-year').addEventListener('click', function () {
    calendar.setYear(document.querySelector('#current-year').value);
  });

  document.querySelector('#get-current-year').addEventListener('click', function () {
    alert(calendar.getYear());
  });

  document.querySelector('#update-min-date').addEventListener('click', function () {
    calendar.setMinDate(document.querySelector('#min-date').valueAsDate);
  });

  document.querySelector('#get-min-date').addEventListener('click', function () {
    alert(calendar.getMinDate());
  });

  document.querySelector('#update-max-date').addEventListener('click', function () {
    calendar.setMaxDate(document.querySelector('#max-date').valueAsDate);
  });

  document.querySelector('#get-max-date').addEventListener('click', function () {
    alert(calendar.getMaxDate());
  });

  document.querySelector('#update-language').addEventListener('click', function () {
    calendar.setLanguage(document.querySelector('#language').value);
  });

  document.querySelector('#get-language').addEventListener('click', function () {
    alert(calendar.getLanguage());
  });

  document.querySelector('#update-style').addEventListener('click', function () {
    if (document.querySelector('#style-border').checked) {
      calendar.setStyle('border');
      document.querySelector('#round-range-limit').disabled = true;
      document.querySelector('#always-half-day').disabled = true;
    }
    else {
      calendar.setStyle('background');
      document.querySelector('#round-range-limit').disabled = false;
      document.querySelector('#always-half-day').disabled = false;
    }
  });

  document.querySelector('#get-style').addEventListener('click', function () {
    alert(calendar.getStyle());
  });

  document.querySelector('#update-overlap').addEventListener('click', function () {
    calendar.setAllowOverlap(document.querySelector('#allow-overlap').checked);
  });

  document.querySelector('#get-overlap').addEventListener('click', function () {
    alert(calendar.getAllowOverlap());
  });

  document.querySelector('#update-range-selection').addEventListener('click', function () {
    calendar.setEnableRangeSelection(document.querySelector('#enable-range-selection').checked);
  });

  document.querySelector('#get-range-selection').addEventListener('click', function () {
    alert(calendar.getEnableRangeSelection());
  });

  document.querySelector('#update-week-number').addEventListener('click', function () {
    calendar.setDisplayWeekNumber(document.querySelector('#display-week-number').checked);
  });

  document.querySelector('#get-week-number').addEventListener('click', function () {
    alert(calendar.getDisplayWeekNumber());
  });

  document.querySelector('#update-round-limit').addEventListener('click', function () {
    calendar.setRoundRangeLimits(document.querySelector('#round-range-limit').checked);
  });

  document.querySelector('#get-round-limit').addEventListener('click', function () {
    alert(calendar.getRoundRangeLimits());
  });

  document.querySelector('#update-half-day').addEventListener('click', function () {
    calendar.setAlwaysHalfDay(document.querySelector('#always-half-day').checked);
  });

  document.querySelector('#get-half-day').addEventListener('click', function () {
    alert(calendar.getAlwaysHalfDay());
  });</script>

<script>
  jQuery(function ($) {
    let calendar = null;

    function editEvent(event) {
      $('#event-modal input[name="event-index"]').val(event ? event.id : '');
      $('#event-modal input[name="event-name"]').val(event ? event.name : '');
      $('#event-modal input[name="event-location"]').val(event ? event.location : '');
      $('#event-modal input[name="event-start-date"]').datepicker('update', event ? event.startDate : '');
      $('#event-modal input[name="event-end-date"]').datepicker('update', event ? event.endDate : '');
      $('#event-modal').modal();
    }

    function deleteEvent(event) {
      var dataSource = calendar.getDataSource();

      calendar.setDataSource(dataSource.filter(item => item.id == event.id));
    }

    function saveEvent() {
      var event = {
        id: $('#event-modal input[name="event-index"]').val(),
        name: $('#event-modal input[name="event-name"]').val(),
        location: $('#event-modal input[name="event-location"]').val(),
        startDate: $('#event-modal input[name="event-start-date"]').datepicker('getDate'),
        endDate: $('#event-modal input[name="event-end-date"]').datepicker('getDate')
      }

      var dataSource = calendar.getDataSource();

      if (event.id) {
        for (var i in dataSource) {
          if (dataSource[i].id == event.id) {
            dataSource[i].name = event.name;
            dataSource[i].location = event.location;
            dataSource[i].startDate = event.startDate;
            dataSource[i].endDate = event.endDate;
          }
        }
      }
      else {
        var newId = 0;
        for (var i in dataSource) {
          if (dataSource[i].id > newId) {
            newId = dataSource[i].id;
          }
        }

        newId++;
        event.id = newId;

        dataSource.push(event);
      }

      calendar.setDataSource(dataSource);
      $('#event-modal').modal('hide');
    }
    //jQuery(document).ready(function ($)
    $(function () {
      var currentYear = new Date().getFullYear();

      calendar = new Calendar('#calendar', {
        enableContextMenu: true,
        enableRangeSelection: true,
        contextMenuItems: [
          {
            text: 'Обновить',
            click: editEvent
          },
          {
            text: 'Удалить',
            click: deleteEvent
          }
        ],
        selectRange: function (e) {
          editEvent({ startDate: e.startDate, endDate: e.endDate });
        },
        mouseOnDay: function (e) {
          if (e.events.length > 0) {
            var content = '';

            for (var i in e.events) {
              content += '<div class="event-tooltip-content">'
                + '<div class="event-name" style="color:' + e.events[i].color + '">' + e.events[i].name + '</div>'
                + '<div class="event-location">' + e.events[i].location + '</div>'
                + '</div>';
            }

            $(e.element).popover({
              trigger: 'manual',
              container: 'body',
              html: true,
              content: content
            });

            $(e.element).popover('show');
          }
        },
        mouseOutDay: function (e) {
          if (e.events.length > 0) {
            $(e.element).popover('hide');
          }
        },
        dayContextMenu: function (e) {
          $(e.element).popover('hide');
        },
        dataSource: [
          {
            id: 0,
            name: 'Google I/O',
            location: 'San Francisco, CA',
            startDate: new Date(currentYear, 4, 28),
            endDate: new Date(currentYear, 4, 29)
          },
          {
            id: 1,
            name: 'Microsoft Convergence',
            location: 'New Orleans, LA',
            startDate: new Date(currentYear, 2, 16),
            endDate: new Date(currentYear, 2, 19)
          },
          {
            id: 2,
            name: 'Microsoft Build Developer Conference',
            location: 'San Francisco, CA',
            startDate: new Date(currentYear, 3, 29),
            endDate: new Date(currentYear, 4, 1)
          },
          {
            id: 3,
            name: 'Apple Special Event',
            location: 'San Francisco, CA',
            startDate: new Date(currentYear, 8, 1),
            endDate: new Date(currentYear, 8, 1)
          },
          {
            id: 4,
            name: 'Apple Keynote',
            location: 'San Francisco, CA',
            startDate: new Date(currentYear, 8, 9),
            endDate: new Date(currentYear, 8, 9)
          },
          {
            id: 5,
            name: 'Chrome Developer Summit',
            location: 'Mountain View, CA',
            startDate: new Date(currentYear, 10, 17),
            endDate: new Date(currentYear, 10, 18)
          },
          {
            id: 6,
            name: 'F8 2015',
            location: 'San Francisco, CA',
            startDate: new Date(currentYear, 2, 25),
            endDate: new Date(currentYear, 2, 26)
          },
          {
            id: 7,
            name: 'Yahoo Mobile Developer Conference',
            location: 'New York',
            startDate: new Date(currentYear, 7, 25),
            endDate: new Date(currentYear, 7, 26)
          },
          {
            id: 8,
            name: 'Android Developer Conference',
            location: 'Santa Clara, CA',
            startDate: new Date(currentYear, 11, 1),
            endDate: new Date(currentYear, 11, 4)
          },
          {
            id: 9,
            name: 'LA Tech Summit',
            location: 'Los Angeles, CA',
            startDate: new Date(currentYear, 10, 17),
            endDate: new Date(currentYear, 10, 17)
          }
        ]
      });

      $('#save-event').click(function () {
        saveEvent();
      });
    });
  });
</script>
@*между ними*@

@*<script src="js/plugins/year-calendar.js"></script>*@     @*скорее всего код для календаря надо нпаисать там*@
<script src="js/plugins/modal.js"></script>

<script src="js/index.js"></script>
  @*обязательно в конце*@



